## Windows用 B25デコードアプリケーション  

ベース：ツクミジマ氏が配布しているaribb25  

## 【改造箇所】  
１．EMG機能追加  
　EMMをカードに投げる設定になっている時にEMGもカードに投げるようにした  
２．カードリーダーを指定する機能  
　複数のカードリーダーを接続している環境でカードリーダーを指定する機能が追加されているが  
　プログラムコードがイマイチなので修正  
３．カードリーダー名称の取得  
　複数のカードリーダーを接続している環境でカードリーダー名称を取得するプログラムを追加  
４．windowsに特化  
　linux用は別のリポジトリで公開することにした  
５．VS2022でプロジェクト作成し直し、ビルド、バグ・ワーニング除去  

## 【output】  
- B1.exe：B1デコードを行うロードモジュール
- B25.exe：B25デコードを行うロードモジュール
- getcrn.exe：カードリーダー名称を取得するロードモジュール
- libaribb1.dll：B1デコードを行うdll
- libaribb25.dll：B25デコードを行うdll
exeはコマンドプロンプトで実行  
  
## 【カードリーダーを指定する方法】  
- デコーダー.dllの場合  
デコーダー.dllのフォルダにデコーダー.iniファイルを作成  
libaribb25.dll の場合は libaribb25.ini  
- ロードモジュール(.exe)の場合  
デコーダー.exeのフォルダにデコーダー.iniファイルを作成

例：  
b25.exeの場合はb25.ini  
[ファイルの中身]  
CardReader=カードリーダー名 を記述する  
 [カードリーダー名取得]  
カードリーダー名はgetcrn.exeを使って取得する  
デコーダー.iniが存在しない時は、最初に見つかったカードリーダーを使用する  

## 【windows版とlinux版の違い】  
オリジナル版はマルモ氏作成のもの  
B25解除するインターフェース部分はC言語で作成されている（B25本体 multi2.cc はC++)  
windows用デコーダーdllはwindowsアプリ(TVTest EDCB等)から動的リンク、コールする為に  
C++でオブジェクトを作成し、それをエクスポートし、そこからC言語のインターフェース関数を呼び出している  
各WindowsアプリはC言語のインターフェース関数を直接呼び出していない  
よってC++オブジェクトで被せてあるdllでないと動作しない  
Linux用はC言語インターフェース+multi2.ccで共有ライブラリを作成し、各チューナーアプリはC言語インターフェース関数を直接呼び出している  

詳細はMulti2Dec/B25Decoder/Readme.txt(マルモ氏作成)を参照  
